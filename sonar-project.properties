# SonarCloud configuration for corems backend

# Project identification (adjust if needed)
sonar.projectKey=${env.SONAR_PROJECT_KEY}
sonar.organization=${env.SONAR_ORGANIZATION}

# Source configuration
sonar.sources=.
sonar.java.binaries=**/target/classes
sonar.java.libraries=**/target/dependency/*.jar
sonar.java.test.binaries=**/target/test-classes

# Exclusions - generated code, tests, configs, API contracts
sonar.exclusions=\
  **/target/**,\
  **/node_modules/**,\
  **/*-api/target/generated-sources/**,\
  **/generated/**,\
  **/*.md,\
  **/src/main/resources/api/**,\
  **/src/main/resources/*.yaml,\
  **/src/main/resources/*.yml

# Test exclusions
sonar.test.exclusions=**/test/**

# Coverage report paths
sonar.coverage.jacoco.xmlReportPaths=**/target/site/jacoco/jacoco.xml

# Disable noisy rules
# S1452: Generic wildcard types - common in Spring ResponseEntity<?>
# S3740: Raw types - sometimes needed for Spring generics
# S4684: JPA entities should use primitive wrappers - opinionated
sonar.issue.ignore.multicriteria=e1,e2,e3,e4

# Ignore @Nullable/@NullMarked incompatibility warnings in exception handlers
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1874
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*ExceptionHandler*.java

# Ignore generic wildcard in ResponseEntity
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S1452
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.java

# Ignore hardcoded credentials in test/example files (like JWT examples in OpenAPI)
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S6418
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*-api/**

# Ignore secrets in API contract examples
sonar.issue.ignore.multicriteria.e4.ruleKey=secrets:*
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.yaml
